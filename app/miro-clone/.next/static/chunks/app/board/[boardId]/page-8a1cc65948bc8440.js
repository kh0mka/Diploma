(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[872],{141:function(e,t,n){Promise.resolve().then(n.bind(n,6752)),Promise.resolve().then(n.bind(n,2558)),Promise.resolve().then(n.bind(n,3382)),Promise.resolve().then(n.bind(n,7085)),Promise.resolve().then(n.bind(n,1541))},6752:function(e,t,n){"use strict";n.r(t),n.d(t,{Canvas:function(){return Q}});var o=n(3827),l=n(1291),r=n(3308),s=n(4090);let i=()=>{(0,s.useEffect)(()=>(document.body.classList.add("overflow-hidden","overscroll-none"),()=>{document.body.classList.remove("overflow-hidden","overscroll-none")}),[])};var a=n(9556);let c=()=>{let e=(0,a.Sk)(e=>e.presence.selection);return(0,a.Db)(t=>{let{storage:n,setMyPresence:o}=t,l=n.get("layers"),r=n.get("layerIds");for(let t of e){l.delete(t);let e=r.indexOf(t);-1!==e&&r.delete(e)}o({selection:[]},{addToHistory:!0})},[e])};var d=n(1657),u=n(7420),x=n(8194);let m=(0,s.memo)(e=>{let{connectionId:t}=e,n=(0,a.v8)(t,e=>null==e?void 0:e.info),l=(0,a.v8)(t,e=>e.presence.cursor),r=(null==n?void 0:n.name)||"Teammate";if(!l)return null;let{x:s,y:i}=l;return(0,o.jsxs)("foreignObject",{style:{transform:"translateX(".concat(s,"px) translateY(").concat(i,"px)")},height:50,width:10*r.length+24,className:"relative drop-shadow-md",children:[(0,o.jsx)(x.Z,{className:"h-5 w-5",style:{fill:(0,d.t_)(t),color:(0,d.t_)(t)}}),(0,o.jsx)("div",{className:"absolute left-5 px-1.5 py-0.5 rounded-md text-sm text-white font-semibold",style:{backgroundColor:(0,d.t_)(t)},children:r})]})});m.displayName="Cursor";var h=n(5999);let f=e=>{let{x:t,y:n,points:l,fill:r,onPointerDown:s,stroke:i}=e;return(0,o.jsx)("path",{className:"drop-shadow-md",onPointerDown:s,d:(0,d.US)((0,h.ZP)(l,{size:16,thinning:.5,smoothing:.5,streamline:.5})),style:{transform:"translate(".concat(t,"px, ").concat(n,"px)")},x:0,y:0,fill:r,stroke:i,strokeWidth:1})},p=()=>{let e=(0,a.YT)();return(0,o.jsx)(o.Fragment,{children:e.map(e=>(0,o.jsx)(m,{connectionId:e},e))})},g=()=>{let e=(0,a.hL)(e=>({pencilDraft:e.presence.pencilDraft,penColor:e.presence.penColor}),l.Xd);return(0,o.jsx)(o.Fragment,{children:e.map(e=>{let[t,n]=e;return n.pencilDraft?(0,o.jsx)(f,{x:0,y:0,points:n.pencilDraft,fill:n.penColor?(0,d._M)(n.penColor):"#000"},t):null})})},y=(0,s.memo)(()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g,{}),(0,o.jsx)(p,{})]}));y.displayName="CursorsPresence";var b=n(2558);let j=e=>{let{id:t,layer:n,onPointerDown:l,selectionColor:r}=e;return(0,o.jsx)("ellipse",{className:"drop-shadow-md",onPointerDown:e=>l(e,t),style:{transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},cx:n.width/2,cy:n.height/2,rx:n.width/2,ry:n.height/2,fill:n.fill?(0,d._M)(n.fill):"#000",stroke:r||"transparent",strokeWidth:1})};var w=n(1870),v=n.n(w),k=n(7579);let N=(e,t)=>Math.min(.15*t,.15*e,96),z=e=>{let{id:t,layer:n,onPointerDown:l,selectionColor:r}=e,{x:s,y:i,width:c,height:u,fill:x,value:m}=n,h=(0,a.Db)((e,n)=>{var o;let{storage:l}=e;null===(o=l.get("layers").get(t))||void 0===o||o.set("value",n)},[]);return(0,o.jsx)("foreignObject",{x:s,y:i,width:c,height:u,onPointerDown:e=>l(e,t),style:{outline:r?"1px solid ".concat(r):"none",backgroundColor:x?(0,d._M)(x):"#000"},className:"shadow-md drop-shadow-xl",children:(0,o.jsx)(k.Z,{html:m||"Text",onChange:e=>{h(e.target.value)},className:(0,d.cn)("h-full w-full flex items-center justify-center text-center outline-none",v().className),style:{fontSize:N(c,u),color:x?(0,d.YJ)(x):"#000"}})})},P=e=>{let{id:t,layer:n,onPointerDown:l,selectionColor:r}=e,{x:s,y:i,width:a,height:c,fill:u}=n;return(0,o.jsx)("rect",{className:"drop-shadow-md",onPointerDown:e=>l(e,t),style:{transform:"translate(".concat(s,"px, ").concat(i,"px)")},x:0,y:0,width:a,height:c,strokeWidth:1,fill:u?(0,d._M)(u):"#000",stroke:r||"transparent"})};var C=n(1263),L=n.n(C);let D=(e,t)=>Math.min(.5*t,.5*e,96),T=e=>{let{id:t,layer:n,onPointerDown:l,selectionColor:r}=e,{x:s,y:i,width:c,height:u,fill:x,value:m}=n,h=(0,a.Db)((e,n)=>{var o;let{storage:l}=e;null===(o=l.get("layers").get(t))||void 0===o||o.set("value",n)},[]);return(0,o.jsx)("foreignObject",{x:s,y:i,width:c,height:u,onPointerDown:e=>l(e,t),style:{outline:r?"1px solid ".concat(r):"none"},children:(0,o.jsx)(k.Z,{html:m||"Text",onChange:e=>{h(e.target.value)},className:(0,d.cn)("h-full w-full flex items-center justify-center text-center drop-shadow-md outline-none",L().className),style:{fontSize:D(c,u),color:x?(0,d._M)(x):"#000"}})})},F=(0,s.memo)(e=>{let{id:t,onLayerPointerDown:n,selectionColor:l}=e,r=(0,a.y$)(e=>e.layers.get(t));if(!r)return null;switch(r.type){case u.F5.Path:return(0,o.jsx)(f,{points:r.points,onPointerDown:e=>n(e,t),x:r.x,y:r.y,fill:r.fill?(0,d._M)(r.fill):"#000",stroke:l},t);case u.F5.Note:return(0,o.jsx)(z,{id:t,layer:r,onPointerDown:n,selectionColor:l});case u.F5.Text:return(0,o.jsx)(T,{id:t,layer:r,onPointerDown:n,selectionColor:l});case u.F5.Ellipse:return(0,o.jsx)(j,{id:t,layer:r,onPointerDown:n,selectionColor:l});case u.F5.Rectangle:return(0,o.jsx)(P,{id:t,onPointerDown:n,selectionColor:l,layer:r});default:return console.warn("Unknown layer type"),null}});F.displayName="LayerPreview";var M=n(3382);let I=e=>{let t=e[0];if(!t)return null;let n=t.x,o=t.x+t.width,l=t.y,r=t.y+t.height;for(let t=1;t<e.length;t++){let{x:s,y:i,width:a,height:c}=e[t];n>s&&(n=s),o<s+a&&(o=s+a),l>i&&(l=i),r<i+c&&(r=i+c)}return{x:n,y:l,width:o-n,height:r-l}},S=()=>{let e=(0,a.Sk)(e=>e.presence.selection);return(0,a.y$)(t=>I(e.map(e=>t.layers.get(e)).filter(Boolean)),l.Xd)},R=(0,s.memo)(e=>{let{onResizeHandlePointerDown:t}=e,n=(0,a.Sk)(e=>1===e.presence.selection.length?e.presence.selection[0]:null),l=(0,a.y$)(e=>{var t;return n&&(null===(t=e.layers.get(n))||void 0===t?void 0:t.type)!==u.F5.Path}),r=S();return r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{className:"fill-transparent stroke-blue-500 stroke-1 pointer-events-none",style:{transform:"translate(".concat(r.x,"px, ").concat(r.y,"px)")},x:0,y:0,width:r.width,height:r.height}),l&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{className:"fill-white stroke-1 stroke-blue-500",x:0,y:0,style:{cursor:"nwse-resize",width:"".concat(8,"px"),height:"".concat(8,"px"),transform:"\n                translate(\n                  ".concat(r.x-4,"px,\n                  ").concat(r.y-4,"px\n                )\n              ")},onPointerDown:e=>{e.stopPropagation(),t(u.MF.Top+u.MF.Left,r)}}),(0,o.jsx)("rect",{className:"fill-white stroke-1 stroke-blue-500",x:0,y:0,style:{cursor:"ns-resize",width:"".concat(8,"px"),height:"".concat(8,"px"),transform:"\n                translate(\n                  ".concat(r.x+r.width/2-4,"px, \n                  ").concat(r.y-4,"px\n                )\n              ")},onPointerDown:e=>{e.stopPropagation(),t(u.MF.Top,r)}}),(0,o.jsx)("rect",{className:"fill-white stroke-1 stroke-blue-500",x:0,y:0,style:{cursor:"nesw-resize",width:"".concat(8,"px"),height:"".concat(8,"px"),transform:"\n                translate(\n                  ".concat(r.x-4+r.width,"px,\n                  ").concat(r.y-4,"px\n                )")},onPointerDown:e=>{e.stopPropagation(),t(u.MF.Top+u.MF.Right,r)}}),(0,o.jsx)("rect",{className:"fill-white stroke-1 stroke-blue-500",x:0,y:0,style:{cursor:"ew-resize",width:"".concat(8,"px"),height:"".concat(8,"px"),transform:"\n                translate(\n                  ".concat(r.x-4+r.width,"px, \n                  ").concat(r.y+r.height/2-4,"px\n                )")},onPointerDown:e=>{e.stopPropagation(),t(u.MF.Right,r)}}),(0,o.jsx)("rect",{className:"fill-white stroke-1 stroke-blue-500",x:0,y:0,style:{cursor:"nwse-resize",width:"".concat(8,"px"),height:"".concat(8,"px"),transform:"\n                translate(\n                  ".concat(r.x-4+r.width,"px, \n                  ").concat(r.y-4+r.height,"px\n                )")},onPointerDown:e=>{e.stopPropagation(),t(u.MF.Bottom+u.MF.Right,r)}}),(0,o.jsx)("rect",{className:"fill-white stroke-1 stroke-blue-500",x:0,y:0,style:{cursor:"ns-resize",width:"".concat(8,"px"),height:"".concat(8,"px"),transform:"\n                translate(\n                  ".concat(r.x+r.width/2-4,"px,\n                  ").concat(r.y-4+r.height,"px\n                )")},onPointerDown:e=>{e.stopPropagation(),t(u.MF.Bottom,r)}}),(0,o.jsx)("rect",{className:"fill-white stroke-1 stroke-blue-500",x:0,y:0,style:{cursor:"nesw-resize",width:"".concat(8,"px"),height:"".concat(8,"px"),transform:"\n                translate(\n                  ".concat(r.x-4,"px,\n                  ").concat(r.y-4+r.height,"px\n                )")},onPointerDown:e=>{e.stopPropagation(),t(u.MF.Bottom+u.MF.Left,r)}}),(0,o.jsx)("rect",{className:"fill-white stroke-1 stroke-blue-500",x:0,y:0,style:{cursor:"ew-resize",width:"".concat(8,"px"),height:"".concat(8,"px"),transform:"\n                translate(\n                  ".concat(r.x-4,"px,\n                  ").concat(r.y-4+r.height/2,"px\n                )")},onPointerDown:e=>{e.stopPropagation(),t(u.MF.Left,r)}})]})]}):null});R.displayName="SelectionBox";var _=n(6245),E=n(6037),B=n(489),Z=n(5754),O=n(9081);let Y=e=>{let{onChange:t}=e;return(0,o.jsxs)("div",{className:"flex flex-wrap gap-2 items-center max-w-[164px] pr-2 mr-2 border-r border-neutral-200",children:[(0,o.jsx)(U,{color:{r:243,g:82,b:35},onClick:t}),(0,o.jsx)(U,{color:{r:255,g:249,b:177},onClick:t}),(0,o.jsx)(U,{color:{r:68,g:202,b:99},onClick:t}),(0,o.jsx)(U,{color:{r:39,g:142,b:237},onClick:t}),(0,o.jsx)(U,{color:{r:155,g:105,b:245},onClick:t}),(0,o.jsx)(U,{color:{r:252,g:142,b:42},onClick:t}),(0,o.jsx)(U,{color:{r:0,g:0,b:0},onClick:t}),(0,o.jsx)(U,{color:{r:255,g:255,b:255},onClick:t})]})},U=e=>{let{color:t,onClick:n}=e;return(0,o.jsx)("button",{className:"w-8 h-8 items-center flex justify-center hover:opacity-75 transition",onClick:()=>n(t),children:(0,o.jsx)("div",{className:"h-8 w-8 rounded-md border border-neutral-300",style:{background:(0,d._M)(t)},"aria-hidden":!0})})},A=(0,s.memo)(e=>{let{camera:t,setLastUsedColor:n}=e,l=(0,a.Sk)(e=>e.presence.selection),r=(0,a.Db)(e=>{let{storage:t}=e,n=t.get("layerIds"),o=[],r=n.toImmutable();for(let e=0;e<r.length;e++)l.includes(r[e])&&o.push(e);for(let e=o.length-1;e>=0;e--)n.move(o[e],r.length-1-(o.length-1-e))},[l]),s=(0,a.Db)(e=>{let{storage:t}=e,n=t.get("layerIds"),o=[],r=n.toImmutable();for(let e=0;e<r.length;e++)l.includes(r[e])&&o.push(e);for(let e=0;e<o.length;e++)n.move(o[e],e)},[l]),i=(0,a.Db)((e,t)=>{let{storage:o}=e,r=o.get("layers");n(t),l.forEach(e=>{var n;null===(n=r.get(e))||void 0===n||n.set("fill",t)})},[l,n]),d=c(),u=S();if(!u)return null;let x=u.width/2+u.x+t.x,m=u.y+t.y;return(0,o.jsxs)("div",{className:"absolute p-3 rounded-xl bg-white shadow-sm border flex select-none",style:{transform:"translate(\n            calc(".concat(x,"px - 50%),\n            calc(").concat(m-16,"px - 100%)\n        )")},children:[(0,o.jsx)(Y,{onChange:i}),(0,o.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,o.jsx)(O.k,{label:"Bring to front",children:(0,o.jsx)(Z.z,{onClick:r,variant:"board",size:"icon",children:(0,o.jsx)(_.Z,{})})}),(0,o.jsx)(O.k,{label:"Bring to back",side:"bottom",children:(0,o.jsx)(Z.z,{onClick:s,variant:"board",size:"icon",children:(0,o.jsx)(E.Z,{})})})]}),(0,o.jsx)("div",{className:"flex items-center pl-2 ml-2 border-l border-t-neutral-200",children:(0,o.jsx)(O.k,{label:"Delete",children:(0,o.jsx)(Z.z,{variant:"board",size:"icon",onClick:d,children:(0,o.jsx)(B.Z,{})})})})]})});A.displayName="SelectionTools";var H=n(6636),$=n(5222),q=n(9209),K=n(7501),W=n(7731),X=n(9578),V=n(784),G=n(7085);let J=e=>{let{canvasState:t,setCanvasState:n,undo:l,redo:r,canRedo:s,canUndo:i}=e;return(0,o.jsxs)("div",{className:"absolute top-[50%] -translate-y-[50%] left-2 flex flex-col gap-y-4",children:[(0,o.jsxs)("div",{className:"bg-white rounded-md p-1.5 flex gap-y-1 flex-col items-center shadow-md",children:[(0,o.jsx)(G.ToolButton,{label:"Select",icon:x.Z,onClick:()=>n({mode:u.Lz.None}),isActive:t.mode===u.Lz.None||t.mode===u.Lz.Translating||t.mode===u.Lz.SelectionNet||t.mode===u.Lz.Pressing||t.mode===u.Lz.Resizing}),(0,o.jsx)(G.ToolButton,{label:"Text",icon:H.Z,onClick:()=>n({mode:u.Lz.Inserting,layerType:u.F5.Text}),isActive:t.mode===u.Lz.Inserting&&t.layerType===u.F5.Text}),(0,o.jsx)(G.ToolButton,{label:"Sticky note",icon:$.Z,onClick:()=>n({mode:u.Lz.Inserting,layerType:u.F5.Note}),isActive:t.mode===u.Lz.Inserting&&t.layerType===u.F5.Note}),(0,o.jsx)(G.ToolButton,{label:"Rectangle",icon:q.Z,onClick:()=>n({mode:u.Lz.Inserting,layerType:u.F5.Rectangle}),isActive:t.mode===u.Lz.Inserting&&t.layerType===u.F5.Rectangle}),(0,o.jsx)(G.ToolButton,{label:"Ellipse",icon:K.Z,onClick:()=>n({mode:u.Lz.Inserting,layerType:u.F5.Ellipse}),isActive:t.mode===u.Lz.Inserting&&t.layerType===u.F5.Ellipse}),(0,o.jsx)(G.ToolButton,{label:"Pen",icon:W.Z,onClick:()=>n({mode:u.Lz.Pencil}),isActive:t.mode===u.Lz.Pencil})]}),(0,o.jsxs)("div",{className:"bg-white rounded-md p-1.5 flex flex-col items-center shadow-md",children:[(0,o.jsx)(G.ToolButton,{label:"Undo",icon:X.Z,onClick:l,isDisabled:!i}),(0,o.jsx)(G.ToolButton,{label:"Redo",icon:V.Z,onClick:r,isDisabled:!s})]})]})},Q=e=>{let{boardId:t}=e,n=(0,a.y$)(e=>e.layerIds),x=(0,a.Sk)(e=>e.presence.pencilDraft),[m,h]=(0,s.useState)({mode:u.Lz.None}),[p,g]=(0,s.useState)({x:0,y:0}),[j,w]=(0,s.useState)({r:0,g:0,b:0});i();let v=(0,a.k6)(),k=(0,a.xF)(),N=(0,a.Pq)(),z=(0,a.Db)((e,t,n)=>{let{storage:o,setMyPresence:s}=e,i=o.get("layers");if(i.size>=100)return;let a=o.get("layerIds"),c=(0,r.x0)(),d=new l.EU({type:t,x:n.x,y:n.y,height:100,width:100,fill:j});a.push(c),i.set(c,d),s({selection:[c]},{addToHistory:!0}),h({mode:u.Lz.None})},[j]),P=(0,a.Db)((e,t)=>{let{storage:n,self:o}=e;if(m.mode!==u.Lz.Translating)return;let l={x:t.x-m.current.x,y:t.y-m.current.y},r=n.get("layers");for(let e of o.presence.selection){let t=r.get(e);t&&t.update({x:t.get("x")+l.x,y:t.get("y")+l.y})}h({mode:u.Lz.Translating,current:t})},[m]),C=(0,a.Db)(e=>{let{self:t,setMyPresence:n}=e;t.presence.selection.length>0&&n({selection:[]},{addToHistory:!0})},[]),L=(0,a.Db)((e,t,o)=>{let{storage:l,setMyPresence:r}=e,s=l.get("layers").toImmutable();h({mode:u.Lz.SelectionNet,origin:o,current:t}),r({selection:(0,d.n$)(n,s,o,t)})},[n]),D=(0,s.useCallback)((e,t)=>{Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>5&&h({mode:u.Lz.SelectionNet,origin:t,current:e})},[]),T=(0,a.Db)((e,t,n)=>{let{self:o,setMyPresence:l}=e,{pencilDraft:r}=o.presence;m.mode===u.Lz.Pencil&&1===n.buttons&&null!=r&&l({cursor:t,pencilDraft:1===r.length&&r[0][0]===t.x&&r[0][1]===t.y?r:[...r,[t.x,t.y,n.pressure]]})},[m.mode]),I=(0,a.Db)(e=>{let{storage:t,self:n,setMyPresence:o}=e,s=t.get("layers"),{pencilDraft:i}=n.presence;if(null==i||i.length<2||s.size>=100){o({pencilDraft:null});return}let a=(0,r.x0)();s.set(a,new l.EU((0,d.Ad)(i,j))),t.get("layerIds").push(a),o({pencilDraft:null}),h({mode:u.Lz.Pencil})},[j]),S=(0,a.Db)((e,t,n)=>{let{setMyPresence:o}=e;o({pencilDraft:[[t.x,t.y,n]],penColor:j})},[j]),_=(0,a.Db)((e,t)=>{let{storage:n,self:o}=e;if(m.mode!==u.Lz.Resizing)return;let l=(0,d.zY)(m.initialBounds,m.corner,t),r=n.get("layers").get(o.presence.selection[0]);r&&r.update(l)},[m]),E=(0,s.useCallback)((e,t)=>{v.pause(),h({mode:u.Lz.Resizing,initialBounds:t,corner:e})},[v]),B=(0,s.useCallback)(e=>{g(t=>({x:t.x-e.deltaX,y:t.y-e.deltaY}))},[]),Z=(0,a.Db)((e,t)=>{let{setMyPresence:n}=e;t.preventDefault();let o=(0,d.pF)(t,p);m.mode===u.Lz.Pressing?D(o,m.origin):m.mode===u.Lz.SelectionNet?L(o,m.origin):m.mode===u.Lz.Translating?P(o):m.mode===u.Lz.Resizing?_(o):m.mode===u.Lz.Pencil&&T(o,t),n({cursor:o})},[D,L,T,m,_,p,P]),O=(0,a.Db)(e=>{let{setMyPresence:t}=e;t({cursor:null})},[]),Y=(0,s.useCallback)(e=>{let t=(0,d.pF)(e,p);if(m.mode!==u.Lz.Inserting){if(m.mode===u.Lz.Pencil){S(t,e.pressure);return}h({origin:t,mode:u.Lz.Pressing})}},[p,m.mode,h,S]),U=(0,a.Db)((e,t)=>{let{}=e,n=(0,d.pF)(t,p);m.mode===u.Lz.None||m.mode===u.Lz.Pressing?(C(),h({mode:u.Lz.None})):m.mode===u.Lz.Pencil?I():m.mode===u.Lz.Inserting?z(m.layerType,n):h({mode:u.Lz.None}),v.resume()},[h,p,m,v,z,C,I]),H=(0,a.hL)(e=>e.presence.selection),$=(0,a.Db)((e,t,n)=>{let{self:o,setMyPresence:l}=e;if(m.mode===u.Lz.Pencil||m.mode===u.Lz.Inserting)return;v.pause(),t.stopPropagation();let r=(0,d.pF)(t,p);o.presence.selection.includes(n)||l({selection:[n]},{addToHistory:!0}),h({mode:u.Lz.Translating,current:r})},[h,p,v,m.mode]),q=(0,s.useMemo)(()=>{let e={};for(let t of H){let[n,o]=t;for(let t of o)e[t]=(0,d.t_)(n)}return e},[H]),K=c();return(0,s.useEffect)(()=>{function e(e){"z"===e.key&&(e.ctrlKey||e.metaKey)&&(e.shiftKey||e.altKey?v.redo():v.undo())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[K,v]),(0,o.jsxs)("main",{className:"h-full w-full relative bg-neutral-100 touch-none",children:[(0,o.jsx)(b.Info,{boardId:t}),(0,o.jsx)(M.Participants,{}),(0,o.jsx)(J,{canvasState:m,setCanvasState:h,canRedo:N,canUndo:k,undo:v.undo,redo:v.redo}),(0,o.jsx)(A,{camera:p,setLastUsedColor:w}),(0,o.jsx)("svg",{className:"h-[100vh] w-[100vw]",onWheel:B,onPointerMove:Z,onPointerLeave:O,onPointerDown:Y,onPointerUp:U,children:(0,o.jsxs)("g",{style:{transform:"translate(".concat(p.x,"px, ").concat(p.y,"px)")},children:[n.map(e=>(0,o.jsx)(F,{id:e,onLayerPointerDown:$,selectionColor:q[e]},e)),(0,o.jsx)(R,{onResizeHandlePointerDown:E}),m.mode===u.Lz.SelectionNet&&null!=m.current&&(0,o.jsx)("rect",{className:"fill-blue-500/5 stroke-blue-500 stroke-1",x:Math.min(m.origin.x,m.current.x),y:Math.min(m.origin.y,m.current.y),width:Math.abs(m.origin.x-m.current.x),height:Math.abs(m.origin.y-m.current.y)}),(0,o.jsx)(y,{}),null!=x&&x.length>0&&(0,o.jsx)(f,{points:x,fill:(0,d._M)(j),x:0,y:0})]})})]})}},2558:function(e,t,n){"use strict";n.r(t),n.d(t,{Info:function(){return g},InfoSkeleton:function(){return y}});var o=n(3827),l=n(3407),r=n.n(l),s=n(2515),i=n(9744),a=n(703),c=n(8792),d=n(2434),u=n(9081),x=n(5754),m=n(892),h=n(1657),f=n(3093);let p=()=>(0,o.jsx)("div",{className:"text-neutral-300 px-1.5",children:"|"}),g=e=>{let{boardId:t}=e,{onOpen:n}=(0,f.C)(),l=(0,s.aM)(m.h.board.get,{id:t});return l?(0,o.jsxs)("div",{className:"absolute top-2 left-2 bg-white rounded-md px-1.5 h-12 flex items-center shadow-md",children:[(0,o.jsx)(u.k,{label:"Go to boards",side:"bottom",sideOffset:10,children:(0,o.jsx)(x.z,{variant:"board",className:"px-2",asChild:!0,children:(0,o.jsxs)(c.default,{href:"/",children:[(0,o.jsx)(a.default,{src:"/logo.svg",alt:"Miro Clone Logo",height:40,width:40}),(0,o.jsx)("span",{className:(0,h.cn)("font-semibold text-xl ml-2 text-black",r().className),children:"Miro"})]})})}),(0,o.jsx)(p,{}),(0,o.jsx)(u.k,{label:"Edit title",side:"bottom",sideOffset:10,children:(0,o.jsx)(x.z,{onClick:()=>n(l._id,l.title),variant:"board",className:"text-base font-normal px-2",children:l.title})}),(0,o.jsx)(p,{}),(0,o.jsx)(d.e,{id:l._id,title:l.title,side:"bottom",sideOffset:10,children:(0,o.jsx)("div",{className:"",children:(0,o.jsx)(u.k,{label:"Main menu",side:"bottom",sideOffset:10,children:(0,o.jsx)(x.z,{size:"icon",variant:"board",children:(0,o.jsx)(i.Z,{})})})})})]}):(0,o.jsx)(y,{})},y=()=>(0,o.jsx)("div",{className:"w-[300px] absolute top-2 left-2 bg-white rounded-md px-1.5 h-12 flex items-center shadow-md","aria-hidden":!0})},3382:function(e,t,n){"use strict";n.r(t),n.d(t,{Participants:function(){return m},ParticipantsSkeleton:function(){return h}});var o=n(3827),l=n(1657),r=n(9556),s=n(9081),i=n(4090),a=n(2178);let c=i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,o.jsx)(a.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...r})});c.displayName=a.fC.displayName;let d=i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,o.jsx)(a.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",n),...r})});d.displayName=a.Ee.displayName;let u=i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,o.jsx)(a.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...r})});u.displayName=a.NY.displayName;let x=e=>{let{src:t,name:n,fallback:l,borderColor:r}=e;return(0,o.jsx)(s.k,{label:n||"Teammate",side:"bottom",sideOffset:18,children:(0,o.jsxs)(c,{className:"h-8 w-8 border-2",style:{borderColor:r},children:[(0,o.jsx)(d,{src:t}),(0,o.jsx)(u,{className:"text-xs font-semibold",children:l})]})})},m=()=>{var e,t,n,s;let i=(0,r.Rq)(),a=(0,r.Sk)(),c=i.length>2;return(0,o.jsx)("div",{className:"absolute h-12 top-2 right-2 bg-white rounded-md p-3 flex items-center shadow-md",children:(0,o.jsxs)("div",{className:"flex gap-x-2",children:[i.slice(0,2).map(e=>{var t;let{connectionId:n,info:r}=e;return(0,o.jsx)(x,{borderColor:(0,l.t_)(n),src:null==r?void 0:r.picture,name:null==r?void 0:r.name,fallback:(null==r?void 0:null===(t=r.name)||void 0===t?void 0:t[0])||"T"},n)}),a&&(0,o.jsx)(x,{borderColor:(0,l.t_)(a.connectionId),src:null===(e=a.info)||void 0===e?void 0:e.picture,name:"".concat(null===(t=a.info)||void 0===t?void 0:t.name," (You)"),fallback:null===(s=a.info)||void 0===s?void 0:null===(n=s.name)||void 0===n?void 0:n[0]}),c&&(0,o.jsx)(x,{name:"".concat(i.length-2," more"),fallback:"+".concat(i.length-2)})]})})},h=()=>(0,o.jsx)("div",{className:"w-[100px] absolute h-12 top-2 right-2 bg-white rounded-md p-3 flex items-center shadow-md","aria-hidden":!0})},7085:function(e,t,n){"use strict";n.r(t),n.d(t,{ToolButton:function(){return s}});var o=n(3827),l=n(9081),r=n(5754);let s=e=>{let{label:t,icon:n,onClick:s,isActive:i,isDisabled:a}=e;return(0,o.jsx)(l.k,{label:t,side:"right",sideOffset:14,children:(0,o.jsx)(r.z,{disabled:a,"aria-disabled":a,onClick:s,size:"icon",variant:i?"boardActive":"board",children:(0,o.jsx)(n,{})})})}},9081:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var o=n(3827),l=n(5322);let r=e=>{let{label:t,children:n,side:r,align:s,sideOffset:i,alignOffset:a}=e;return(0,o.jsx)(l.TooltipProvider,{children:(0,o.jsxs)(l.Tooltip,{delayDuration:100,children:[(0,o.jsx)(l.TooltipTrigger,{asChild:!0,children:n}),(0,o.jsx)(l.TooltipContent,{className:"text-white bg-black border-black",side:r,align:s,sideOffset:i,alignOffset:a,children:(0,o.jsx)("p",{className:"font-semibold capitalize",children:t})})]})})}},1541:function(e,t,n){"use strict";n.r(t),n.d(t,{Room:function(){return i}});var o=n(3827),l=n(1291),r=n(4967),s=n(9556);let i=e=>{let{children:t,roomId:n,fallback:i}=e;return(0,o.jsx)(s.ke,{id:n,initialPresence:{cursor:null,selection:[],pencilDraft:null,penColor:null},initialStorage:{layers:new l.oV,layerIds:new l.as},children:(0,o.jsx)(r.EH,{fallback:i,children:()=>t})})}},5322:function(e,t,n){"use strict";n.r(t),n.d(t,{Tooltip:function(){return a},TooltipContent:function(){return d},TooltipProvider:function(){return i},TooltipTrigger:function(){return c}});var o=n(3827),l=n(4090),r=n(5056),s=n(1657);let i=r.zt,a=r.fC,c=r.xz,d=l.forwardRef((e,t)=>{let{className:n,sideOffset:l=4,...i}=e;return(0,o.jsx)(r.VY,{ref:t,sideOffset:l,className:(0,s.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...i})});d.displayName=r.VY.displayName},9556:function(e,t,n){"use strict";n.d(t,{Db:function(){return D},Pq:function(){return L},Rq:function(){return u},Sk:function(){return d},YT:function(){return h},hL:function(){return x},k6:function(){return N},ke:function(){return s},v8:function(){return f},xF:function(){return C},y$:function(){return b}});var o=n(1291),l=n(4967);let r=(0,o.eI)({throttle:16,authEndpoint:"/api/liveblocks-auth",async resolveUsers(e){let{userIds:t}=e;return[]},async resolveMentionSuggestions(e){let{text:t}=e;return[]},async resolveRoomsInfo(e){let{roomIds:t}=e;return[]}}),{suspense:{RoomProvider:s,useRoom:i,useMyPresence:a,useUpdateMyPresence:c,useSelf:d,useOthers:u,useOthersMapped:x,useOthersListener:m,useOthersConnectionIds:h,useOther:f,useBroadcastEvent:p,useEventListener:g,useErrorListener:y,useStorage:b,useObject:j,useMap:w,useList:v,useBatch:k,useHistory:N,useUndo:z,useRedo:P,useCanUndo:C,useCanRedo:L,useMutation:D,useStatus:T,useLostConnectionListener:F,useThreads:M,useCreateThread:I,useEditThreadMetadata:S,useCreateComment:R,useEditComment:_,useDeleteComment:E,useAddReaction:B,useRemoveReaction:Z,useThreadSubscription:O,useMarkThreadAsRead:Y,useRoomNotificationSettings:U,useUpdateRoomNotificationSettings:A}}=(0,l.m1)(r),{suspense:{LiveblocksProvider:H,useMarkInboxNotificationAsRead:$,useMarkAllInboxNotificationsAsRead:q,useInboxNotifications:K,useUnreadInboxNotificationsCount:W,useUser:X,useRoomInfo:V}}=(0,l.pf)(r)}},function(e){e.O(0,[327,641,875,167,873,56,89,434,971,69,744],function(){return e(e.s=141)}),_N_E=e.O()}]);